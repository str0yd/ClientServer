
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="Server.html">
      
      
        <link rel="next" href="Exercise.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>Client - Client Server Dokumentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#client" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href="index.html" title="Client Server Dokumentation" class="md-header__button md-logo" aria-label="Client Server Dokumentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Client Server Dokumentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Client
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
            
          
        </form>
      
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Client Server Dokumentation" class="md-nav__button md-logo" aria-label="Client Server Dokumentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Client Server Dokumentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Übersicht
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Projekt_erstellen.html" class="md-nav__link">
        Projekt erstellen
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Server.html" class="md-nav__link">
        Server
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Client.html" class="md-nav__link md-nav__link--active">
        Client
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubersicht" class="md-nav__link">
    Übersicht
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bibliotheken" class="md-nav__link">
    Bibliotheken
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-objekt-erstellen" class="md-nav__link">
    Client Objekt erstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verbindung-herstellen" class="md-nav__link">
    Verbindung herstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nachrichten-schicken" class="md-nav__link">
    Nachrichten schicken
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zusammenfassung" class="md-nav__link">
    Zusammenfassung
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Exercise.html" class="md-nav__link">
        Aufgaben
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubersicht" class="md-nav__link">
    Übersicht
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bibliotheken" class="md-nav__link">
    Bibliotheken
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-objekt-erstellen" class="md-nav__link">
    Client Objekt erstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verbindung-herstellen" class="md-nav__link">
    Verbindung herstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nachrichten-schicken" class="md-nav__link">
    Nachrichten schicken
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zusammenfassung" class="md-nav__link">
    Zusammenfassung
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="client">Client</h1>
<p>In diesem Abschnitt erstellen wir einen Server, zu dem sich ein Client verbinden kann.</p>
<h2 id="ubersicht">Übersicht</h2>
<p>Zum erstellen eines Clients können Sie die Standardbibliotheken von C# verwenden.</p>
<p>Danach können wir ein Client-Objekt erstellen, der sich auf einen bestimmten Port eines Servers verbindet. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ein Port wird in der Computernetzwerktechnik verwendet, um den Datenverkehr zwischen verschiedenen Anwendungen oder Diensten zu ermöglichen. Ein Port ist eine numerische Kennung, die einer bestimmten Anwendung auf einem Gerät zugewiesen wird, um den Austausch von Daten zwischen verschiedenen Geräten im Netzwerk zu ermöglichen.</p>
</div>
<p>Ein Client geht in der Regel eine aktive Verbindung mit einem Server ein. Aus diesem Grund muss der Server zuerst gestartet werden, damit sich der Client verbinden kann.</p>
<p>Der Client versucht also eine Verbindung mit einem Server mittels TCP-Socket einzugehen. Wird der Verbindungsversuch aktzeptiert, können die beiden miteinander kommunizieren.</p>
<p>Wir werden nun einen Client erstellen, der sich mit einem Server verbindet und ihm Nachrichten schicken kann.</p>
<h2 id="bibliotheken">Bibliotheken</h2>
<p>Zum Erstellen des Clients verwenden wir die Standardbibliotheken von C#. Um diese zu verwenden müssen sie im ersten Schritt eingebunden werden.</p>
<div class="admonition abstract">
<p class="admonition-title">Arbeitsauftrag</p>
<p>Binden Sie folgende Bibliotheken am Anfang des C#-Codedokuments ein:
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>System.Net.Sockets
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>System.Net
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>System.Text
</span></code></pre></div></p>
<details class="success">
<summary>Lösung</summary>
<div class="language-cs highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Net.Sockets</span><span class="p">;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Net</span><span class="p">;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Text</span><span class="p">;</span>
</span></code></pre></div>
</details>
</div>
<p>Mit hilfe dieser Bibliotheken können wir im nächsten Schritt einen Client erstellen.</p>
<h2 id="client-objekt-erstellen">Client Objekt erstellen</h2>
<p>Wir verwenden nun die eingebunden Bibliotheken, um ein Client-Objekt zu erstellen.</p>
<p>In C# Verwenden wir sogenannte Sockets, um eine TCP-Verbindung einzuleiten und aufrecht zu erhalten.</p>
<p>In unserem Fall verwendet der Server einen TcpListener. Dieser ist eine Erweiterung der Socket-Klasse.</p>
<p>Für den Client verwenden wir nun einen TCP-Socket, um mit dem Server zu kommunizieren.</p>
<div class="admonition abstract">
<p class="admonition-title">Arbeitsauftrag TCP</p>
<p>Informieren Sie sich (falls noch nicht geschehen) circa 10 Minuten über TCP! Suchen sie sich selbstständig geeignetes Informationsmaterial im Internet.</p>
<p>Beantworten Sie folgende Fragen:</p>
<ol>
<li>Wieso verwenden Applikationen TCP-Ports?</li>
<li>Welche Ports sollten Sie für Ihre eigenen Anwendungen verwenden?</li>
</ol>
<details class="success">
<summary>Lösung -- Falls Sie nichts finden...</summary>
<p><a href="https://www.elektronik-kompendium.de/sites/net/1812041.htm">Elektronik Kompendium TCP</a></p>
</details>
</div>
<div class="admonition abstract">
<p class="admonition-title">Arbeitsauftrag Client erstellen</p>
<p>Erstellen Sie einen Client, der sich auf eine bestimmte IP-Adresse und einen bestimmten Port eines Servers verbindet.</p>
<details class="abstract">
<summary>Schwierig</summary>
<p><a href="https://learn.microsoft.com/de-de/dotnet/fundamentals/networking/sockets/socket-services#create-an-ip-endpoint">Erstellen eines IP-Endpunkts C# Dokumentation</a></p>
</details>
<details class="abstract">
<summary>Mittel</summary>
<p>Erstellen Sie in der Main-Methode ein Socket-Objekt.</p>
<p>Der Konstruktor des Socket-Objets hat drei Argumente:</p>
<ol>
<li>AddressFamily: Gibt das Adressierschema an, das durch eine Instanz der Socket-Klasse verwendet werden kann.</li>
<li>SocketType: Gibt den Sockettyp an, der von einer Instanz der Socket-Klasse dargestellt wird.</li>
<li>ProtocolType: Gibt die Protokolle an, die die Socket-Klasse unterstützt.</li>
</ol>
<p>Als SocketType verwenden wir <mark>SocketType.Stream</mark>.
ProtocolType ist Tcp: <mark>ProtocolType.Tcp</mark></p>
<p>Die AddressFamily müssen wir etwas umständlicher erstellen:</p>
<p>Im Ersten Schritt benötigen wir ein IPAddress-Objekt. Dieses Objekt stellt die IP-Adresse des zu verbindenden Servers dar. Sie erstellen dieses Objekt wie folgt:
<div class="language-cs highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">IPAddress</span><span class="w"> </span><span class="n">ipAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IPAddress</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">);</span>
</span></code></pre></div></p>
<p>Tragen Sie hier statt der Loopback-Adresse 127.0.0.1 die Adresse des Servers ein (falls Sie es lokal ausprobieren bleibt natürlich diese Loopback-Adresse stehen.ü</p>
<p>Im nächsten Schritt müssen wir ein IPEndPoint-Objekt erstellen. Dies verwendet das IPAddress-Objekt und fügt einen Port hinzu:
<div class="language-cs highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">IPEndPoint</span><span class="w"> </span><span class="n">ipEndPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">ipAddress</span><span class="p">,</span><span class="w"> </span><span class="m">9999</span><span class="p">);</span>
</span></code></pre></div></p>
<p>In diesem Beispiel erstellen wir ein IPEndPoint-Objekt, das auf den Port 9999 bindet. Sie können den Port frei wählen, es muss jedoch der gleiche Port sein, den Sie beim Server auch verwenden.</p>
<p>Nun können Sie die AddressFamily im Konstruktor des Socket-Objekts wie folgt verwenden:
<div class="language-cs highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">ipEndPoint</span><span class="p">.</span><span class="n">AddressFamily</span>
</span></code></pre></div></p>
</details>
<details class="success">
<summary>Lösung</summary>
<div class="language-cs highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Net</span><span class="p">;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Net.Sockets</span><span class="p">;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Text</span><span class="p">;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="k">internal</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="p">{</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">        </span><span class="n">IPAddress</span><span class="w"> </span><span class="n">ipAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IPAddress</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">);</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="n">IPEndPoint</span><span class="w"> </span><span class="n">ipEndPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">ipAddress</span><span class="p">,</span><span class="w"> </span><span class="m">9999</span><span class="p">);</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="nn">Socket</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">            </span><span class="n">ipEndPoint</span><span class="p">.</span><span class="n">AddressFamily</span><span class="p">,</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">            </span><span class="n">SocketType</span><span class="p">.</span><span class="n">Stream</span><span class="p">,</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">            </span><span class="n">ProtocolType</span><span class="p">.</span><span class="n">Tcp</span><span class="p">);</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="p">}</span>
</span></code></pre></div>
</details>
</div>
<h2 id="verbindung-herstellen">Verbindung herstellen</h2>
<p>Wir haben nun den Client erstellt. Dieser weiß nun, an welche IP-Adresse und welchen Port er sich verbinden muss. Im nächsten Schritt müssen wir uns mit einem Server verbinden.</p>
<div class="admonition abstract">
<p class="admonition-title">Arbeitsauftrag</p>
<p>Der Client soll sich nun mit einem Server verbinden. Überlegen Sie, welche Methode sie auf das Client-Objekt hierfür anwenden müssen.</p>
<details class="success">
<summary>Lösung</summary>
<div class="language-cs highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">client</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="n">ipEndPoint</span><span class="p">);</span>
</span></code></pre></div>
</details>
</div>
<p>Probieren Sie das Verhalten Ihres Clients mit und ohne laufenden Server aus.</p>
<h2 id="nachrichten-schicken">Nachrichten schicken</h2>
<p>Wir haben nun ein Client-Objekt erstellt und gestartet. Dieser verbindet sich nun mit einem Server, tut ansonsten jedoch noch nicht viel.</p>
<p>Ziel ist es, mit dem Server zu kommunizieren. Dafür senden wir Nachrichten an den Server, der diese in der eigenen Konsole ausgibt.</p>
<div class="admonition abstract">
<p class="admonition-title">Arbeitsauftrag</p>
<p>Der Client soll Nachrichten, die in der eigenen Konsole eingegeben werden an den Server schicken.</p>
<details class="abstract">
<summary>Schwierig</summary>
<p>Die <mark>Send()</mark>-Methode des Clients verwendet ein byte-Array, um Nachrichten zu versenden.</p>
<p>Erstellen Sie dieses und rufen Sie die Send()-Methode auf, um Nachrichten, die Sie in die Konsole eingeben, zu schicken.</p>
</details>
<details class="abstract">
<summary>Mittel</summary>
<p>Die <mark>Send()</mark>-Methode des Clients verwendet ein byte-Array, um Nachrichten zu versenden.</p>
<p>Wir müssen also im ersten Schritt eine Nachricht von der Konsole erhalten:
<div class="language-cs highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kt">var</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;&lt;|EOM|&gt;&quot;</span><span class="p">;</span>
</span></code></pre></div></p>
<p>Danach müssen wir diesen String in ein byte-Array konvertieren:
<div class="language-cs highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kt">var</span><span class="w"> </span><span class="n">messageBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="n">GetBytes</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span></code></pre></div></p>
<p>Und zum Schluss können wir die Nachricht versenden:
<div class="language-cs highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">client</span><span class="p">.</span><span class="n">Send</span><span class="p">(</span><span class="n">messageBytes</span><span class="p">,</span><span class="w"> </span><span class="n">SocketFlags</span><span class="p">.</span><span class="n">None</span><span class="p">);</span>
</span></code></pre></div></p>
</details>
<details class="success">
<summary>Lösung</summary>
<div class="language-cs highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">System.Net</span><span class="p">;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">System.Net.Sockets</span><span class="p">;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">System.Text</span><span class="p">;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="k">internal</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">        </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">            </span><span class="n">IPAddress</span><span class="w"> </span><span class="n">ipAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IPAddress</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">);</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">            </span><span class="n">IPEndPoint</span><span class="w"> </span><span class="n">ipEndPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="n">ipAddress</span><span class="p">,</span><span class="w"> </span><span class="m">9999</span><span class="p">);</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">            </span><span class="c1">// cerates the client</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">            </span><span class="n">Socket</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">                </span><span class="n">ipEndPoint</span><span class="p">.</span><span class="n">AddressFamily</span><span class="p">,</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">                </span><span class="n">SocketType</span><span class="p">.</span><span class="n">Stream</span><span class="p">,</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">                </span><span class="n">ProtocolType</span><span class="p">.</span><span class="n">Tcp</span><span class="p">);</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">            </span><span class="c1">// connect to the server</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">            </span><span class="n">client</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="n">ipEndPoint</span><span class="p">);</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">            </span><span class="c1">// get message from console</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;&lt;|EOM|&gt;&quot;</span><span class="p">;</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">            </span><span class="c1">// convert message to bytes</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">messageBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="n">GetBytes</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">            </span><span class="c1">// send message to the server</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">            </span><span class="n">client</span><span class="p">.</span><span class="n">Send</span><span class="p">(</span><span class="n">messageBytes</span><span class="p">,</span><span class="w"> </span><span class="n">SocketFlags</span><span class="p">.</span><span class="n">None</span><span class="p">);</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Socket client sent message: \&quot;{message}\&quot;&quot;</span><span class="p">);</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
</details>
</div>
<p>An dieser Stelle können Sie nun mit dem Server kommunizieren und ihm eine Nachricht schicken. Dieser sollte sie auf der eigenen Konsole ausgeben.</p>
<p>Testen Sie Ihre Umsetzung!</p>
<h2 id="zusammenfassung">Zusammenfassung</h2>
<p>Wir haben nun einen Client erstellt, der sich mit einem Server verbindet und ihm eine Nachricht schickt.</p>
<p>Wenn Sie die Verbindung des Clients mit dem Server erfolgreich getestet haben, bearbeiten Sie <a href="Exercise.html">weitere Aufgaben</a>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}}</script>
    
    
      <script src="assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>